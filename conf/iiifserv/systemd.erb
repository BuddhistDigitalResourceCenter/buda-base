# Systemd unit file for iiifserv

[Unit]
Description=<%= ENV['SVC_DESC'] %>
After=syslog.target network.target

[Service]
Type=simple

Environment=JAVA_HOME=<%= ENV['JAVA_HOME'] %>
Environment=IIFSERV_HOME=<%= ENV['THE_HOME'] %>

Environment='JAVA_OPTS=-Djava.awt.headless=true -Djava.security.egd=file:/dev/./urandom'

WorkingDirectory=<%= ENV['THE_HOME'] %>
ExecStart=/usr/bin/java -Dserver.port=<%= ENV['MAIN_PORT'] %> -Diiifserv.configpath=/etc/buda/iiifpres/ -Dspring.config.location=file:/etc/buda/iiifserv/application.yml -Dspring.profiles.active=PROD -XX:+ExitOnOutOfMemoryError -Xmx2g -jar  buda-hymir-exec.jar
SuccessExitStatus=143

User=<%= ENV['TC_USER'] %>
Group=<%= ENV['TC_GROUP'] %>

UMask=0007
RestartSec=10
Restart=always

[Install]
WantedBy=multi-user.target
